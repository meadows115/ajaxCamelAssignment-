package mail;

import com.icegreen.greenmail.util.GreenMail;
import com.icegreen.greenmail.util.GreenMailUtil;
import com.icegreen.greenmail.util.ServerSetupTest;
import java.io.IOException;

/**
 * @author Mark George <mark.george@otago.ac.nz>
 */
public class MockMailServer {

	public static void main(String[] args) throws IOException {
		String subject = "Vend:SaleUpdate";

                String body= "{\"created_at\":\"2020-05-18 08:48:12\",\"customer\":{\"balance\":\"0.00000\",\"company_name\":\"\",\"contact_first_name\":\"mac\",\"contact_last_name\":\"ryan\",\"created_at\":\"2020-05-12 20:46:47\",\"custom_field_1\":\"\",\"custom_field_2\":\"\",\"custom_field_3\":\"\",\"custom_field_4\":\"\",\"customer_code\":\"mac-B972\",\"customer_group_id\":\"0afa8de1-147c-11e8-edec-2b197906d816\",\"date_of_birth\":null,\"deleted_at\":null,\"do_not_email\":false,\"email\":\"test@gmail.com\",\"enable_loyalty\":false,\"fax\":null,\"first_name\":\"mac\",\"id\":\"069db350-8d7c-11ea-f6a9-9491b241618c\",\"last_name\":\"ryan\",\"loyalty_balance\":\"0.00000\",\"mobile\":null,\"note\":\"\",\"phone\":null,\"points\":0,\"sex\":null,\"updated_at\":\"2020-05-18 08:48:13\",\"year_to_date\":\"7224.06006\"},\"customer_id\":\"069db350-8d7c-11ea-f6a9-9491b241618c\",\"deleted_at\":null,\"id\":\"f184284e-acda-b58b-11ea-98c020f1e462\",\"invoice_number\":\"24\",\"note\":\"\",\"outlet_id\":\"069db350-8d7c-11ea-f6a9-89c142e47d9e\",\"register_id\":\"069db350-8d7c-11ea-f6a9-89c14b0cdd92\",\"register_sale_payments\":[{\"amount\":5396.9,\"id\":\"f184284e-acda-b58b-11ea-98e44b5b3e48\",\"payment_date\":\"2020-05-18T08:48:07Z\",\"payment_type\":{\"has_native_support\":false,\"id\":\"1\",\"name\":\"Cash\"},\"payment_type_id\":1,\"retailer_payment_type\":{\"config\":null,\"id\":\"0afa8de1-1450-11e8-edec-056e6ed01696\",\"name\":\"Cash\",\"payment_type_id\":\"1\"},\"retailer_payment_type_id\":\"0afa8de1-1450-11e8-edec-056e6ed01696\"}],\"register_sale_products\":[{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e426297413\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"60.78261\",\"price_set\":false,\"price_total\":\"60.78261\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e701f4190\",\"quantity\":1,\"tax\":\"9.11739\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"9.11739\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e429b755c4\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"172.95652\",\"price_set\":false,\"price_total\":\"172.95652\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e7088c06b\",\"quantity\":1,\"tax\":\"25.94348\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"25.94348\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e42cf78ca5\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f43c130\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e42fe3b016\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e437ef9fd7\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f2e29c3\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e439290a38\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f2e29c3\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43a14a2b9\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f2e29c3\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43b0b85da\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f2e29c3\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43bdf77ab\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43c85f0dc\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43d29aaed\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43dcaccee\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43e731adf\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43f0b6340\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e43fb0a3f1\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e4406ec3d2\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e4412590b3\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e441cd1b54\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e442ce5eb5\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e4438cf3c6\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"},{\"discount\":\"0.00000\",\"id\":\"f184284e-acda-b58b-11ea-98e444b87b77\",\"is_return\":false,\"loyalty_value\":\"0.00000\",\"note\":null,\"price\":\"234.69565\",\"price_set\":false,\"price_total\":\"234.69565\",\"product_id\":\"0afa8de1-147c-11e8-edec-056e6f0be097\",\"quantity\":1,\"tax\":\"35.20435\",\"tax_id\":\"0afa8de1-1450-11e8-edec-056e6ec70277\",\"tax_total\":\"35.20435\"}],\"return_for\":null,\"sale_date\":\"2020-05-18T08:48:07Z\",\"short_code\":\"lc1fi9\",\"source\":\"USER\",\"source_id\":null,\"status\":\"CLOSED\",\"taxes\":[{\"id\":\"6ecd4ad7-056e-11e8-adec-0afa8de11450\",\"name\":\"GST\",\"rate\":\"0.15000\",\"tax\":703.94352}],\"totals\":{\"total_loyalty\":\"0.00000\",\"total_payment\":\"5396.90000\",\"total_price\":\"4692.95648\",\"total_tax\":\"703.94352\",\"total_to_pay\":\"0.00000\"},\"updated_at\":\"2020-05-18T08:48:12+00:00\",\"user\":{\"created_at\":\"2020-04-29 03:18:43\",\"display_name\":\"Nikki\",\"email\":\"meani898@student.otago.ac.nz\",\"id\":\"069db350-8d7c-11ea-f6a9-89c8216589f7\",\"name\":\"meani898\",\"target_daily\":null,\"target_monthly\":null,\"target_weekly\":null,\"updated_at\":\"2020-04-29 03:18:43\"},\"user_id\":\"069db350-8d7c-11ea-f6a9-89c8216589f7\",\"version\":14010901510}";
                        // create a mock server than can receive (SMTP) and host (IMAP)
		GreenMail greenMail = new GreenMail(ServerSetupTest.SMTP_IMAP);

		// add a user
		greenMail.setUser("test@localhost", "test@localhost", "password");

		// start the server
		greenMail.start();

		System.out.println("IMAP Server Ready on port " + greenMail.getImap().getPort());
		System.out.println("Press Enter to send an E-Mail ...");

		// a loop for sending messages
		while (true) {

			// let the user press enter to send a message
			System.out.print("Press Enter to send an E-Mail ...");
			System.in.read();

			// send a message
			GreenMailUtil.sendTextEmailTest("test@localhost", "test@localhost", subject, body);
			System.out.println(" sent.");
		}

	}
}
